# Codex 指导文档

## 项目概览
- 工程名：`gskill_editor`
- 类型：运行于 Unity 编辑器内的技能配置工具，用于生成驱动游戏技能系统的 CSV 数据。
- 核心目标：通过数据驱动的方式定义技能、Buff、效果、序列与触发器，减少手写配置并保持客户端/服务端行为一致。

## 关键目录
- `Assets/`：Unity 编辑器脚本与资源，主要承载技能编辑器界面与逻辑。
- `Config/`：导出的技能系统 CSV 文件（含 `.meta`），供游戏工程直接载入。
- `ProjectSettings/`、`Packages/`：Unity 工程配置，保持与主项目兼容。
- `README.md`：项目简介与操作流程，修改时请保持与此文档一致。

## 常见任务指引
1. **更新或新增技能配置**
   - 在 Unity 中调整相应资源，执行导出，校对 `Config/` 下的 CSV。
   - 确认字段新增/删除时游戏端解析逻辑同步更新。
2. **扩展编辑器功能**
   - 优先定位 `Assets/` 内脚本；保持与现有 UI 交互一致。
   - 新增工具栏或窗口前，在 README 补充使用说明。
3. **引入新效果类型**
   - 定义效果参数结构，更新导出逻辑与 CSV 字段。
   - 编写最小示例配置，放入 `Config/` 备查。

## 开发原则
- 编码语言默认 C#（Unity），脚本需遵循 PascalCase 类型名、camelCase 字段名、`m_` 前缀的私有成员约定。
- 编辑配置时保持 CSV 与脚本字段一一对应；若诱发破坏性改动，请优先在 PR/说明中列举影响面。
- 仅在必要的复杂逻辑处添加中文注释，保持注释与实现同步。
- 不要删除或覆盖 `.meta` 文件，确保 GUID 稳定。

## 数据配置约定
- 技能（Skill）是入口；可挂载多个 Buff、触发器。
- Buff 与 Skill 均可引用序列（Sequence），序列负责调度时间轴事件。
- 效果（Effect）对外暴露 `EffectType` 字段，不同类型参数语义需在导出与解析双方保持一致。
- 触发器（Trigger）由事件类型 + 条件 + 效果/序列引用组成；新增触发器事件时需在工具与运行时同时更新枚举值。
- CSV 使用 UTF-8 无 BOM，首行字段名称固定；改动需记录在变更说明中。

## 与 Unity 编辑器交互
- 优先使用项目推荐的 Unity 版本（如未明确，向维护者确认）；版本不兼容可能导致 `.meta` 冲突。
- 导出流程：打开工程 → 进入技能编辑器窗口 → 编辑数据 → 执行导出命令 → 校验 `Config/*.csv`。
- 若需要脚本化导出，请在 `Assets/Editor/` 下创建 EditorWindow/菜单，并写明依赖。

## 验证与交付
- 变更技能逻辑时，至少提供一份测试或验证描述：包含触发方式、预期行为、验证数据。
- 代码修改后运行相关 Unity 编辑器测试（如有 PlayMode/EditMode Tests），并在提交信息/说明中附上结果。
- CSV 改动需对比差异，避免无关注释或空行变化污染提交。

## 沟通注意事项
- 遇到不确定的字段含义或导出格式，先查阅 `Config/` 示例，再向维护者确认。
- 涉及跨项目协作（客户端/服务器）时，提前同步字段调整计划。
- 当现有流程无法满足需求，请在文档中记录新流程，方便后续人员继承。
